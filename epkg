#! /bin/bash

action=$1
packages=($*)
unset packages[0]

if [[ "x$action" = "xsearch" ]]; then
	eix ${packages[@]}
fi

# Let's do this the lazy way for multiple params...Because I am lazy
if [[ "x$action" = "xinstall" ]]; then
	emerge -av ${packages[@]}
fi

if [[ "x$action" = "xremove" || "x$action" = "xuninstall" ]]; then
	emerge --depclean -av ${packages[@]}
fi

if [[ "x$action" = "xupdate" ]]; then
	eix-sync
fi

if [[ "x$action" = "xupgrade" ]]; then
	# Make it portage 2.1-safe and make sure it catches EVERYTHING.
	emerge -uDvaN --with-bdeps=y @system world
fi

if [[ "x$action" = "xlistfiles" ]]; then
	equery files ${packages[@]}
fi

if [[ "x$action" = "xlistinstalled" ]]; then
	equery list ${packages[@]}
fi

if [[ "x$action" = "xforceremove" ]]; then
	emerge --unmerge -av ${packages[@]}
fi

if [[ -z $1 ]]; then
	echo "Usage: epkg install|remove|update|upgrade|search|listfiles|listinstalled|forceremove [package(s)]"
fi